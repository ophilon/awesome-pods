.PHONY: help build up down clean stop restart logs test ps stats shell
help:
	@echo "make sure you in proper docker context: ${CONTEXT}\n"
	docker context use ${CONTEXT}
	docker context ls 
	@echo "make_compose avalable targets:\n"
	@make -pRrq 2>/dev/null|grep -v ^Makefile|grep -P '^\w+:'|sort
build:
	docker compose build
up:
	docker compose up -d
clean:
	docker system prune -f
commit: test
	@read -p "Enter commit message:" mesg; \
	git commit -am "$$mesg"
down:
	docker compose down -v
stop:
	docker compose stop
restart:
	docker compose stop
	docker compose up -d
logs:
	docker compose logs
test:
	curl ${CONTEXT}:8080
ps:
	docker compose ps -a
stats:
	docker compose stats --no-stream
shell:
	docker exec -ti traefik /bin/sh
